<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta name="renderer" content="webkit"/>
    <meta name="force-rendering" content="webkit"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=0.5, maximum-scale=3.0, user-scalable=yes">
	<link href="../res/css.css" rel="stylesheet" type="text/css" />
	<link href="../res/prism.css" rel="stylesheet" type="text/css" />
 	<script type="text/javascript" src="../res/index.js"></script>
   <title>系统执行 - boaPHP开发手册</title>
</head>
<body class="column">
	<header class="head">
		<h2>boaPHP开发手册<span>v5.5</span></h2>
		<div></div>
	</header>
	<article class="body">
		<div class="menu">
			
		</div>
		<div class="main">
			<div class="title">系统执行</div>
			<div class="content">
				<p class="subtitle">启动</p>
<p>每个入口文件，在定义必须的 BS_ROOT 和 BS_WWW 常量后，系统从 <b>boa::start()</b> 启动：
<ul>
	<li>BS_ROOT 表示系统所在根路径</li>
	<li>BS_WWW 表示当前实例所在路径</li>
</ul>
</p>

<p class="subtitle">调用</p>
<p>可以使用 <b>boa::call()</b> 来调用任意模块中控制器的动作，可模拟浏览器的访问：
	<pre><code class="language-php">
$res = boa::call('news.content.show', ['id' => $id]);
	</code></pre>
</p>

<p class="subtitle">模型</p>
<p>可以使用 <b>boa::model()</b> 来访问任意模块中的模型类：
	<pre><code class="language-php">
$arr = boa::model('news.content')-&gt;get($id);
	</code></pre>
</p>

<p class="subtitle">类库</p>
<p>可以使用 <b>boa::lib()</b> 来访问任意模块下library目录中类的方法：
	<pre><code class="language-php">
$arr = boa::lib('admin.common')-&gt;run($id); //调用admin模块下common类的run方法
$arr = boa::lib('common')-&gt;run($id); //调用同模块下common类的run方法
	</code></pre>
</p>

<p class="subtitle">环境</p>
<p>所有动作的执行都依据环境数据，一组环境数据完整的结构：
	<pre><code class="language-php">
[
	'lng'  => 'zh-cn',  //语言
	'mod'  => 'home',   //模块
	'con'  => 'index',  //控制器
	'act'  => 'index',  //动作
	'var' => [          //额外变量
		'page' => 1     //分页
		'....'          //等
	]
]
	</code></pre>
</p>
<p>可以使用 <b>boa::env()</b> 来访问当前环境数据：
	<pre><code class="language-php">
$mod = boa::env('mod');
$env = boa::env();
	</code></pre>
</p>
<p>想得到上层环境数据（即当前环境所处环境）请使用 <b>boa::in_env()</b>

<p class="subtitle">变量</p>
<p>在一个动作中，可以直接使用形如 $this->id 来访问$_GET, $_POST, $_COOKIE 以及环境var数组中的数据</p>
<p class="tip tip-help">更多参见 <a href="../validater/index.html">验证</a>章节</p>
<p class="subtitle">常量</p>
<p>系统配置最终会被定义为常量，访问方法同常量</p>
<ul>
	<li>PHP中：boa::const('NAME') 或 NAME ，模块配置需要带命名空间：\模块\NAME</li>
	<li>模板中：{NAME}</li>
</ul>
<p class="tip tip-help">更多参见 <a href="../api/boa.boa.html">boa类</a></p>							</div>
			<div class="navigate">
				<a href="../master/13.html" class="prev">< 系统配置</a>
				<a class="menu"></a>
				<a href="../master/15.html" class="next">语言使用 ></a></a>
			</div>
		</div>
	</article>
	<script type="text/javascript" src="../res/menu.js"></script>
	<script type="text/javascript" src="../res/prism.js"></script>
</body>
</html>